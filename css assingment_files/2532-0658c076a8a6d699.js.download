"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2532],{97614:function(e,t,n){var r=n(85893),i=n(11163),a=n(67294),s=n(89883),o=n(47710),l=n(64197),c=n(12493),u=n(89575);t.Z=(0,i.withRouter)((function(e){var t=e.slug,n=e.labels,d=void 0===n?[]:n,f=e.removable,g=void 0!==f&&f,h=e.limit,m=void 0===h?5:h,x=e.handleSuccess,p=e.isNewChangelog,b=void 0!==p&&p,v=e.filterable,j=void 0!==v&&v,y=e.selectable,w=void 0!==y&&y,_=e.embed,Z=void 0!==_&&_,N=e.isWidget,k=void 0!==N&&N,C=(0,a.useContext)(o.Z).translations,S=C.common,M=C.changelog,O=(0,i.useRouter)(),A=function(e,t){var n=(0,c.hp)(),r=n.labels?n.labels.split(","):[];if(r.length<=m-1||r.includes(t.toString())){var i="".concat(Z?"/embed/c":"/changelog").concat((0,c.U6)(e,t));k&&(i="/changelogwidget".concat((0,c.U6)(e,t))),O.push(i)}else l.A.info({message:M.changelog_category.maximum_filter_info})},R=function(e){return b?x(e):j?A("labels",e.id):(0,u.cO)(t,e.id).then((function(e){return x(e)})).catch((function(e){return l.A.error({message:S.error,subMessage:e.message})}))};return(0,r.jsxs)("div",{className:"flex flex-row flex-wrap items-center",children:[d.map((function(e,t){if(t<m){var n=(0,r.jsx)(s.Z,{closable:g,selectable:w,data:e,handleDelete:R,color:e.color,children:e.name},t);return j&&!g?(0,r.jsx)("div",{onClick:function(){return A("labels",e.id)},children:n},t):n}return(0,r.jsx)(r.Fragment,{})})),!g&&d.length-m>=1&&(0,r.jsxs)("span",{className:"mb-0.5 mr-0.5 inline-flex items-center px-1 py-1 text-xxs font-medium text-gray-500 transition dark:text-gray-400",children:["+",d.length-m]})]})}))},13250:function(e,t,n){var r=n(85893),i=n(67294),a=n(64197),s=n(12493),o=n(89575),l=n(44186);t.Z=function(e){var t=e.changelog,n=(0,i.useState)(t.reactions),c=n[0],u=n[1],d=function(e){var n={resource_id:t.id,resource_type:"Changelog",reaction_id:e},r=(0,s.M2)(c),i=r.findIndex((function(t){return t.id===e}));return-1!==i&&(r[i].isLoading=!0),u(r),(c.find((function(t){return t.id===e&&t.reacted}))?(0,o.SC)(e,n):(0,o.Mf)(n)).then((function(e){u(e)})).catch((function(e){a.A.error({message:e.message})}))};return(0,i.useEffect)((function(){var e=(0,s.M2)(c);e.map((function(t,n){return e[n].isLoading=!1,e})),u(e)}),[]),(0,r.jsx)("div",{className:"flex flex-wrap items-center justify-start space-x-1 text-center",children:(0,s.JT)(c,"count").map((function(e){return(0,r.jsx)(l.Z,{canReact:!0,loading:e.isLoading,reaction:e,handleReaction:d},t.id+e.id)}))})}},4615:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(85893),i=n(45938),a=n(27842),s=n(21417),o=n(67294),l=n(12493),c=n(47710),u=n(37425),d=function(e,t,n){return e.split("{slug}").join(t).split("{origin}").join(window.location.origin).split("{title}").join(n)},f="text-gray-400 transition dark:text-gray-400 hover:no-underline hover:text-primary dark:hover:text-primary focus:outline-none";function g(e){var t=e.changelog,n=e.isWidget,g=void 0!==n&&n,h=(0,o.useContext)(c.Z),m=h.translations,x=h.organization,p=m.changelog.changelogs.table,b=m.changelog.messages.copied_link;return(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(u.Z,{text:p.placeholders.click_to_copy,children:(0,r.jsx)("span",{tabIndex:"0",role:"button",className:f,onClick:function(){return(0,l.Md)(function(){var e=window.location.origin.concat("/");return g&&(e=x.home_page),e.concat("changelog/").concat(t.slug)}(),b)},children:(0,r.jsx)(i.Z,{weight:"bold",className:"h-4 w-4"})})}),(0,r.jsx)(u.Z,{text:p.placeholders.share_on_twitter,children:(0,r.jsx)("a",{className:f,href:d("https://twitter.com/intent/tweet?text={title}&url={origin}/changelog/{slug}",t.slug,t.title),target:"_blank",rel:"noreferrer",children:(0,r.jsx)(a.Z,{weight:"fill",className:"h-4 w-4"})})}),!g&&(0,r.jsx)(u.Z,{text:p.placeholders.send_as_mail,children:(0,r.jsx)("a",{className:f,href:d("mailto:?body={origin}/changelog/{slug}&subject={title}",t.slug,t.title),children:(0,r.jsx)(s.Z,{weight:"bold",className:"h-4 w-4"})})})]})}},32532:function(e,t,n){n.d(t,{Z:function(){return L}});var r=n(85893),i=n(11163),a=n(97580),s=n(22431),o=n(67294),l=n(52949),c=n(64197),u=n(12493),d=n(97614),f=n(58539),g=n(51852),h=n(34350),m=n(82611),x=n(45621),p=n(97253),b=n(22331),v=n(4189),j=n(84667),y=n(6072),w=n(86010),_=n(13250),Z=n(37425),N=n(4615),k=n(47710);function C(e){var t=e.changelog,n=e.embed,a=e.isWidget,s=e.noHeader,l=(0,o.useContext)(k.Z),c=l.organization,f=l.translations,g=(0,i.useRouter)(),h=(0,o.useRef)(null),m=(0,o.useState)(!1),p=m[0],b=m[1],j={pathname:"/".concat(n?"embed/c":"changelog","/").concat(t.slug)};a&&(j.pathname="".concat(c.home_page,"changelog/").concat(t.slug)),n||(j.state={changelog:t,link:!0}),n&&s&&(j.pathname=j.pathname+"?no_header=true");(0,o.useEffect)((function(){return h.current&&h.current.offsetHeight>500&&b(!0),(0,u.Lm)(h),function(){(0,u.jn)(h)}}),[]);var y;return t?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"mx-auto grid max-w-xl gap-4 py-12 transition md:grid-cols-1 md:gap-10",children:(0,r.jsxs)("div",{children:[(0,r.jsx)(v.Z,{href:j.pathname,className:"-mt-1 flex bg-white py-2 text-xl font-medium text-gray-800 transition hover:no-underline dark:bg-[#131313] dark:text-white",onClick:function(e){return function(e,t){a&&(e.preventDefault(),g.push("changelogwidget/".concat(t.slug)))}(e,t)},children:(0,r.jsx)("h2",{children:t.title})}),(0,r.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(y=t,y.labels&&y.labels.length?(0,r.jsx)(d.Z,{limit:5,labels:y.labels,filterable:!0,selectable:!0,embed:n,isWidget:a}):(0,r.jsx)(r.Fragment,{})),(0,r.jsx)(Z.Z,{text:t.published_at.humanized_date,children:(0,r.jsx)(v.Z,{href:j.pathname,className:"my-0 flex text-left text-xs font-medium text-gray-500 transition dark:text-gray-400",children:t.published_at.relative_time})})]}),(0,r.jsxs)("div",{className:"prose prose-sm relative max-w-none prose-a:text-primary dark:prose-invert",children:[(0,r.jsx)("div",{className:(0,w.Z)(p?"max-h-[30rem] overflow-hidden":""),ref:h,dangerouslySetInnerHTML:{__html:t.description_html}}),(0,r.jsx)("div",{className:"mx-auto max-w-xl text-center transition duration-300",children:p&&(0,r.jsx)("div",{className:"absolute inset-x-0 bottom-0 h-12 w-full bg-gradient-to-t from-white via-white to-white/80 dark:from-gray-900 dark:via-gray-900 dark:to-gray-900/80",children:(0,r.jsxs)(x.Z,{className:"mt-2 justify-center !text-brand",size:"xxs",variant:"nostyle",onClick:function(){return b(!1)},children:[f.buttons.read_more," \u2193"]})})})]}),(0,r.jsxs)("div",{className:"mt-5 flex items-center justify-between",children:[(0,r.jsx)(_.Z,{changelog:t}),(0,r.jsx)(N.Z,{changelog:t,isWidget:a})]})]})})}):(0,r.jsx)(r.Fragment,{})}var S=n(50034),M=n(66325),O=n(89575);function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){R(e,t,n[t])}))}return e}function W(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var E={published:{published:!0}},F=function(){var e=(0,u.hp)();return e.token&&e.iframe_id&&(delete e.token,delete e.iframe_id),e.labels&&(e.labels=e.labels.split(","),e.labels=e.labels.map((function(e){return+e}))),e};function L(e){var t=e.embed,n=void 0!==t&&t,w=e.isWidget,_=void 0!==w&&w,Z=(0,o.useRef)(1),N=(0,o.useRef)((0,u.hp)()||{}),A=(0,o.useState)([]),R=A[0],L=A[1],z=(0,o.useState)(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=I({},e);return n.status=E.published?"published":"unpublished",t?null:(0,O.at)(I({page:1},n))}(N.current,n)||[]),J=z[0],q=z[1],P=(0,o.useState)(!0),D=P[0],H=P[1],U=(0,o.useState)(!0),Q=U[0],V=U[1],T=(0,o.useState)(F()),$=T[0],G=T[1],B=(0,o.useContext)(k.Z),K=B.translations,X=B.pageLimits,Y=B.organizationSetting,ee=B.organization,te=B.show_changelog_tab,ne=B.changelog_labels,re=void 0===ne?[]:ne,ie=B.iframe_id,ae=K.changelog,se=(0,o.useRef)(!0),oe=(0,i.useRouter)(),le=oe.asPath.includes("no_header=true"),ce=function(){return re.map((function(e){var t=!!$.labels&&$.labels.findIndex((function(t){return+t===+e.id}))>=0;return(0,r.jsx)(p.hP,{value:e.id,disabled:t,onClick:function(){return function(e,t){try{var r="".concat(n?"/embed/c":"/changelog").concat((0,u.U6)(e,t,5));_&&(r="/changelogwidget".concat((0,u.U6)(e,t,5))),oe.push(r)}catch(i){}}("labels",e.id)},children:e.name},e.id)}))},ue=(0,o.useState)(ce()),de=ue[0],fe=ue[1],ge=function(e){return(0,u.o8)(E,"published")&&E.published===e.published},he=function(e){var t=e.changelog,n=e.type;return"add"===n?L((function(e){var n=(0,u.M2)(e);return ge(t)&&n.unshift(t),n})):"update"===n?L((function(e){var n=(0,u.M2)(e);if(ge(t)){var r=n.findIndex((function(e){return e.id===t.id}));-1!==r?n[r]=t:n.unshift(t)}else{var i=n.findIndex((function(e){return e.id===t.id}));-1!==i&&n.splice(i,1)}return n})):("delete"===n&&L((function(e){var n=(0,u.M2)(e);if(ge(t)){var r=n.findIndex((function(e){return e.id===t.id}));-1!==r&&n.splice(r,1)}return n})),!0)},me=function(){return se.current?(1===Z.current&&H(!0),G((function(e){var t=I({page:Z.current,status:E.published?"published":"unpublished"},e);return(0,O.Rr)(t).then((function(e){if(_){var n=(0,u.Cy)(S.t_);new Date(e[0].published_at.timestamp)<new Date(n)&&window.parent.postMessage(JSON.stringify({action:"indicate",payload:!1}),"*")}L((function(n){var r;return V(!(e.length<=(X.changelogs||10))),Z.current>1?r=W(n).concat(W(e)):((0,O.Nt)(t,e),r=e),r}))})).then((function(){return q([])})).catch((function(e){return c.A.error({message:"Error",subMessage:e.message})})).finally((function(){return H(!1)})),e}))):null};(0,o.useEffect)((function(){return window.addEventListener("message",(function(e){e&&e.data.opened&&(0,u.qy)(S.t_,new Date)})),l.vp.subscribe("updateChangelog",he),function(){se.current=!1,Z.current=!1,L([]),V(!0),H(!0),l.vp.unsubscribe("updateChangelog")}}),[]),(0,o.useEffect)((function(){Z.current=1,fe(ce()),me()}),[$]),(0,o.useEffect)((function(){V(!1),G(F()),oe.query.iframe_id&&l.vp.dispatch("updateContext",{iframe_id:oe.query.iframe_id})}),[oe.query]);var xe=function(e,t){return(0,r.jsx)(C,{changelog:e,embed:n,isWidget:_,noHeader:le},t)},pe=function(){if(!$.labels)return ae.empty_state_title},be=function(){if(!$.labels)return ae.empty_state_message};return te?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.Z,{title:Y.changelog_plural_name}),_&&(0,r.jsx)(M.Z,{leftComponent:function(){if(_&&ee)return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(v.Z,{target:"_blank",href:"".concat(ee.home_page,"/changelogs"),className:"text-primary hover:underline",rel:"noreferrer",children:ae.view_all_updates})})}(),rightComponent:(0,r.jsx)("button",{onClick:function(){window.parent.postMessage(JSON.stringify({action:"close",payload:ie}),"*"),window.parent.postMessage(JSON.stringify({action:"indicate",payload:!1}),"*")},children:(0,r.jsx)(s.Z,{weight:"bold",className:"h-4 w-4"})})}),$.labels&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{id:"changelog_labels_filters_section",className:"relative mx-auto mt-4 max-w-3xl",children:[(0,r.jsx)("div",{className:"absolute inset-0 hidden items-center sm:flex","aria-hidden":"true",children:(0,r.jsx)("div",{className:"w-full border-t border-gray-300 transition dark:border-gray-700"})}),(0,r.jsxs)("div",{className:"relative flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsx)("span",{className:"mb-2 bg-white text-xxs font-bold uppercase tracking-wider text-gray-500 transition dark:bg-gray-900 dark:text-gray-300 sm:mb-0 sm:pr-3",children:ae.changelog_category.filtered_by}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center space-x-0.5 bg-white transition dark:bg-gray-900 sm:pl-2",children:[(0,r.jsx)(d.Z,{limit:5,labels:$.labels?re.filter((function(e){return $.labels.includes(e.id)})):[],filterable:!0,removable:!0,embed:n,isWidget:_}),$.labels.length<5&&(0,r.jsxs)(p.Lt,{items:de,children:[(0,r.jsx)(p.WA,{children:(0,r.jsx)(x.Z,{renderAsSpan:!0,variant:"light",size:"xs",className:"!flex !h-6 !w-6 !items-center !justify-center !rounded-full !px-0",children:(0,r.jsx)(a.Z,{weight:"bold",className:"flex h-2.5 w-2.5 shrink-0"})})}),(0,r.jsx)(p.Nv,{children:de})]})]})]})]})}),(0,r.jsxs)("section",{className:"mx-auto max-w-xl divide-y divide-gray-200 px-2 transition dark:divide-gray-700",children:[1===Z.current&&J.length?J.length?J.map(xe):(0,r.jsx)(g.Z,{embed:n}):D&&!R.length?(0,r.jsx)(m.Z,{}):R.length?R.map(xe):(0,r.jsx)(j.Z,{id:"changelog_empty_state",url:"".concat(window.location.origin,"/images/empty/changelog.svg"),children:(0,r.jsx)(b.Z,{title:pe(),message:be()})}),(0,r.jsx)(h.Z,{showIf:R.length,canFetchMore:Q,onIntersect:function(){return e=1,Z.current+=e,me();var e}})]}),_&&(0,r.jsx)("div",{className:"item-center fixed bottom-0 w-full justify-center bg-white dark:bg-gray-900",children:(0,r.jsx)(y.Z,{})})]}):(oe.push("/"),(0,r.jsx)(r.Fragment,{}))}},89575:function(e,t,n){n.d(t,{RX:function(){return w},zl:function(){return b},Mf:function(){return Z},QO:function(){return h},Q7:function(){return d},dq:function(){return x},Sx:function(){return u},Rr:function(){return o},Mj:function(){return j},jC:function(){return g},at:function(){return l},pq:function(){return _},cO:function(){return v},SC:function(){return N},_d:function(){return m},Nt:function(){return c},yv:function(){return p},cV:function(){return f},OI:function(){return y}});var r=n(72933),i=n(81817),a=n(12493),s=n(57537),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isAdmin?s.jsf:s.bVm;return r.Z.get(n,e)},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,a.o$)(e),r=t.isAdmin?s.jsf:s.bVm;return(0,i.Cy)(r.replace(".json","")+n,"changeloglist")},c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,a.o$)(e),o=n.isAdmin?s.jsf:s.bVm;return(0,i.hq)(o.replace(".json","")+r,t)},u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.isAdmin?s.JkL:s.fMg;return r.Z.get(i(e),t)},d=function(e){return r.Z.post(s.jsf,e)},f=function(e,t){return r.Z.put((0,s.JkL)(e),t)},g=function(e){return r.Z.get(s.Fm_,e)},h=function(e,t){return r.Z.post((0,s.KMJ)(e),t)},m=function(e,t){return r.Z.delete((0,s.lPz)(e,t))},x=function(e){return r.Z.delete((0,s.JkL)(e))},p=function(e,t){return r.Z.post((0,s.CvN)(e),t)},b=function(e,t){return r.Z.post((0,s.HzQ)(e),t)},v=function(e,t){return r.Z.delete((0,s.ZBv)(e,t))},j=function(e){return r.Z.get((0,s.Qsn)(e))},y=function(e,t){return r.Z.post((0,s.WMF)(e),t)},w=function(e){return r.Z.post(s.R4R,e)},_=function(e,t){return r.Z.delete((0,s.GJv)(e),t)},Z=function(e){return r.Z.post((0,s.wGO)(),e)},N=function(e,t){return r.Z.delete((0,s.WWH)(e),t)}}}]);
